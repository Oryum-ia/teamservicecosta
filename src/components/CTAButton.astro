---
interface Props {
  text: string;
  href?: string;
  icon?: 'calendar' | 'diagnostic' | 'maintenance' | 'phone' | 'whatsapp' | 'shop';
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'small' | 'medium' | 'large';
  openInNewTab?: boolean;
}

const {
  text,
  href = '#',
  icon,
  variant = 'primary',
  size = 'medium',
  openInNewTab = false
} = Astro.props;

const icons = {
  calendar: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>`,
  diagnostic: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>`,
  maintenance: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>`,
  phone: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>`,
  whatsapp: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>`,
  shop: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>`
};
---

<a
  href={href}
  class={`cta-button cta-${variant} cta-${size}`}
  target={openInNewTab ? '_blank' : '_self'}
  rel={openInNewTab ? 'noopener noreferrer' : undefined}
>
  {icon && <span class="cta-icon" set:html={icons[icon]} />}
  <span class="cta-text">{text}</span>
  <span class="cta-arrow">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="5" y1="12" x2="19" y2="12"></line>
      <polyline points="12 5 19 12 12 19"></polyline>
    </svg>
  </span>
</a>

<style>
  .cta-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-2);
    font-family: var(--font-primary);
    font-weight: var(--font-bold);
    text-decoration: none;
    border-radius: var(--radius-lg);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
    cursor: pointer;
  }

  /* Sizes */
  .cta-small {
    padding: var(--spacing-2) var(--spacing-4);
    font-size: var(--text-sm);
  }

  .cta-medium {
    padding: var(--spacing-3) var(--spacing-6);
    font-size: var(--text-base);
  }

  .cta-large {
    padding: var(--spacing-4) var(--spacing-8);
    font-size: var(--text-lg);
  }

  /* Primary Variant */
  .cta-primary {
    background: linear-gradient(135deg, #FFD700 0%, #FFC700 100%);
    color: #1a1a2e;
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3);
  }

  .cta-primary::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left 0.5s ease;
  }

  .cta-primary:hover::before {
    left: 100%;
  }

  .cta-primary:hover {
    background: linear-gradient(135deg, #FFC700 0%, #FFB700 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(255, 215, 0, 0.45);
  }

  /* Secondary Variant */
  .cta-secondary {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    color: #FFD700;
    box-shadow: 0 4px 16px rgba(26, 26, 46, 0.2);
  }

  .cta-secondary:hover {
    background: linear-gradient(135deg, #16213e 0%, #0f3460 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 24px rgba(26, 26, 46, 0.35);
  }

  /* Outline Variant */
  .cta-outline {
    background: transparent;
    color: #1a1a2e;
    border: 2px solid #FFD700;
    box-shadow: none;
  }

  .cta-outline:hover {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(255, 215, 0, 0.05) 100%);
    border-color: #FFC700;
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(255, 215, 0, 0.2);
  }

  /* Icons and Text */
  .cta-icon,
  .cta-arrow {
    display: flex;
    align-items: center;
    position: relative;
    z-index: 1;
  }

  .cta-text {
    position: relative;
    z-index: 1;
  }

  .cta-arrow {
    transition: transform 0.3s ease;
  }

  .cta-button:hover .cta-arrow {
    transform: translateX(4px);
  }

  .cta-button:active {
    transform: translateY(0);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .cta-large {
      padding: var(--spacing-3) var(--spacing-6);
      font-size: var(--text-base);
    }

    .cta-button {
      width: 100%;
    }
  }
</style>
